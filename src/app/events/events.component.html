<div *ngIf="selectedEvent" class="event-details-container">
  <div class="event-header">
    <img [src]="selectedEvent.PosterURL" alt="{{ selectedEvent.Name }}" class="event-poster" />
    <div class="event-info">
      <h1>{{ selectedEvent.Name }}</h1>
      <p class="tagline" *ngIf="selectedEvent.Tagline">"{{ selectedEvent.Tagline }}"</p>
      <ul class="meta-list">
        <li><strong>Category:</strong> {{ selectedEvent.Category }}</li>
        <li><strong>Location:</strong> {{ selectedEvent.Location }}</li>
        <li><strong>Date:</strong> {{ selectedEvent.Date | date:'MMM d, y' }}</li>
        <li *ngIf="selectedEvent.Language"><strong>Language:</strong> {{ selectedEvent.Language }}</li>
        <li *ngIf="selectedEvent.Format"><strong>Format:</strong> {{ selectedEvent.Format }}</li>
      </ul>
    </div>
  </div>

  <div class="booking-section">
    <div class="booking-details">
      <div>
        <h3>{{ selectedEvent.Venue || 'Cinépolis VIP Season Pune' }}</h3>
        <p>Seasons Mall, Magarpatta Police Station Rd, Hadapsar, Pune, Maharashtra 411028</p>
      </div>
      <div class="booking-actions">
        <button class="showtime-btn">
          {{ selectedEvent.Language || 'Hindi' }} {{ selectedEvent.Format || '2D' }} - {{ selectedEvent.Showtime ||
          '11:05 PM' }}
        </button>
        <button class="book-btn" (click)="bookTickets(selectedEvent)">
          🎟️ Book Tickets
        </button>
        <button class="rating-btn" (click)="rateEvent(selectedEvent)">
          ⭐ Rate
        </button>
      </div>
    </div>
  </div>

  <!-- Display Comments Section -->
  <div class="comments-section">
    <h3>Event Reviews & Comments</h3>
    <app-display-comments [eventId]="selectedEvent.EventID"></app-display-comments>
  </div>
</div>

<ng-template [ngIf]="!selectedEvent">
  <div class="events-page">
    <h2>🎉 Events</h2>
    <div class="card-container">
      <div *ngFor="let event of eventList" class="event-card" (click)="goToDetails(event)">
        <div class="poster-wrapper">
          <img [src]="event.PosterURL" alt="{{ event.Name }}" class="poster" />
        </div>
        <div class="event-details">
          <h4 class="event-title">{{ event.Name }}</h4>
          <p class="event-meta">{{ event.Category }} • {{ event.Location }}</p>
          <p class="event-date">📅 {{ event.Date | date:'MMM d, y' }}</p>
          <p class="event-tagline" *ngIf="event.Tagline">"{{ event.Tagline }}"</p>
          <div class="card-actions">
            <button class="book-btn" (click)="bookTickets(event); $event.stopPropagation()">
              🎟️ Book Now
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>