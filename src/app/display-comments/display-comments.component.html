<!-- 
<div class="feedback-table-container">
  
    <table class="table table-hover table-bordered feedback-table">
      <thead>
        <th>Ratings</th>
        <th>Comments</th>
      </thead>
      <tbody>
        <tr *ngFor="let feed of feedbackLst">
          <td>{{ feed.rating }}</td>
          <td>{{ feed.comments }}</td>
        </tr>
      </tbody>
    </table>
  </div> -->


<!-- <div id="carosuelExampleControls" class="carosuel Slide" data-ride="carosuel"  *ngFor="let feed of feedbackLst">
    <div class="carosuel-inner" >
        <div class="carosuel-item active"  >
            
                {{feed.comments}}
            
        </div>
    </div>
    
  </div>  -->

<!-- <div class="card" style="width: 18rem;" *ngFor="let feed of feedbackLst">
  <div class="card-body">
    <h5 class="card-title">comments</h5>
    <h6 class="card-subtitle mb-2 text-muted"></h6>
    <p class="card-text" >{{feed.comments}}</p>
    
  </div>
</div> -->



<!-- <div class="event-rating text-end mt-2">
  <span style="color: red; font-size: 1.1rem;">â˜…</span>
  <span class="ms-1">{{ averageRating }}/5</span>
  <span class="ms-2 text-muted small">({{ voteCount }} votes)</span>
</div>


<div id="feedbackCarousel" class="carousel carousel-dark slide mt-4" data-bs-ride="carousel" >
  <div class="carousel-inner">
    <ng-container *ngFor="let _ of feedbackLst; let i = index">
      <div class="carousel-item" *ngIf="i % 3 === 0" [class.active]="i === 0">
        <div class="row justify-content-center">

         
          <div class="col-md-6 col-lg-4 mb-4" *ngIf="feedbackLst[i]">
            <div class="card" style="border-radius: 20px; width: 18rem;">
              <div class="card-body">
                <div class="card-subtitle">ðŸ‘¤ {{ feedbackLst[i].userName }}</div>
                <h5 class="card-title">Comments</h5>
                <p class="card-text">{{ feedbackLst[i].comments }}</p>
               
                <p class="card-text" style="color: red; font-size: 1.1rem;">â˜…{{ feedbackLst[i].rating }}/5</p>
              </div>
            </div>
          </div>

          
          <div class="col-md-6 col-lg-4 mb-4" *ngIf="feedbackLst[i+1]">
            <div class="card" style="border-radius: 20px; width: 18rem;">
              <div class="card-body">
                <div class="card-subtitle">ðŸ‘¤ {{ feedbackLst[i+1].userName }}</div>
                <h5 class="card-title">Comments</h5>
                <p class="card-text">{{ feedbackLst[i+1].comments }}</p>
                <p class="card-text" style="color: red; font-size: 1.1rem;">â˜…{{ feedbackLst[i+1].rating }}/5</p>
              </div>
            </div>
          </div>

          
          <div class="col-md-6 col-lg-4 mb-4" *ngIf="feedbackLst[i+2]">
            <div class="card" style="border-radius: 20px; width: 18rem;">
              <div class="card-body">
                <div class="card-subtitle">ðŸ‘¤ {{ feedbackLst[i+2].userName }}</div>
                <h5 class="card-title">Comments</h5>
                <p class="card-text">{{ feedbackLst[i+2].comments }}</p>
                <p class="card-text" style="color: red; font-size: 1.1rem;" >â˜…{{ feedbackLst[i+2].rating }}/5</p>
              </div>
            </div>     
          </div>
    
        </div>
      </div>
    </ng-container>
  </div>

 
  <button class="carousel-control-prev" type="button" data-bs-target="#feedbackCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#feedbackCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>
 -->



<!-- Rating Bar -->
 <body>
  
                 
<div class="rating-breakdown-container"> 
  <h4>Ratings & Reviews</h4>
  <div class=" mt-4">
  <div class=" d-flex  gap-2">
    <span class="star">â˜…</span>
    <div class="text">
      <div class="avg fw-bold">{{ averageRating }}/5 <span class="" style="margin-left: 1rem ;">Average Rating</span></div>
      <div class="mb-4  h7">({{ voteCount }} reviews)</div>
    </div>
  </div>
</div>
  
  <div class="break-row" *ngFor="let s of starValues">
    <div class="break-label ">{{ s }} â˜…</div>
    <div class="break-bar">
      <div class="progress-bar" [ngClass]="'bar-' + s" [style.width.%]="ratingPercents[s]"></div>
    </div>
    <div class="break-count">{{ ratingCounts[s] }} ({{ ratingPercents[s] }}%)</div>
  </div>
</div>
<!-- Summary -->


<!-- Positve -->
<section class="section mt-4">
  <div class=" d-flex  justify-content-between">
    <div class="  gap-2">
      <h5 class="mb-0">Top Reviews</h5>
    </div>
    <span class="badge rounded-pill bg-success-subtle text-success  border-success">
      {{ positiveLatest.length }}
    </span>
  </div>

  <div
    *ngIf="positiveLatest.length > 0; else noPosTpl"
    class="carousel carousel-dark slide carousel mt-3 controls-middle"
    [attr.id]="'latestPosCarousel-' + eventId"
    data-bs-ride="carousel"
    data-bs-interval="5000"
    data-bs-pause="hover"
    data-bs-touch="true"
    data-bs-keyboard="true"
  >
    <div class="carousel-inner">
      <!-- 3 cards per slide using i%3 -->
      <ng-container *ngFor="let _ of positiveLatest; let i = index">
        <div class="carousel-item" *ngIf="i % 3 === 0" [class.active]="i === 0">
          <div class="row justify-content-center">

            <!-- Card 1 -->
            <div class="col-md-6 col-lg-4 mb-4" *ngIf="positiveLatest[i] as item1">
              <article class="card card">
                <div class="card-body d-flex flex-column">
                  <div class="card-head d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center gap-2">
                      <div class="avatar">U</div>
                      <div class="d-flex flex-column">
                        <span class="user">{{ item1.userName || 'User' }}</span>
                        <span class="badge badge-positive">Positive</span>
                      </div>
                    </div>
                    <div class="rating"><span class="star sm">â˜…</span> {{ item1.rating }}/5</div>
                  </div>

                  <!-- Full comment (no expand) -->
                  <p class="comment" [title]="item1.comments">{{ item1.comments }}</p>

                  <!-- Footer: time-ago bottom-right -->
                  <div class="footer d-flex mt-auto">
                    <div class="ms-auto text-muted small">
                      {{ timeAgo(item1.submittedTimestamp || item1.createdAt) }}
                    </div>
                  </div>
                </div>
              </article>
            </div>

            <!-- Card 2 -->
            <div class="col-md-6 col-lg-4 mb-4" *ngIf="positiveLatest[i+1] as item2">
              <article class="card card">
                <div class="card-body d-flex flex-column">
                  <div class="card-head d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center gap-2">
                      <div class="avatar">U</div>
                      <div class="d-flex flex-column">
                        <span class="user">{{ item2.userName || 'User' }}</span>
                        <span class="badge badge-positive">Positive</span>
                      </div>
                    </div>
                    <div class="rating"><span class="star sm">â˜…</span> {{ item2.rating }}/5</div>
                  </div>

                  <p class="comment" [title]="item2.comments">{{ item2.comments }}</p>

                  <div class="footer d-flex mt-auto">
                    <div class="ms-auto text-muted small">
                      {{ timeAgo(item2.submittedTimestamp || item2.createdAt) }}
                    </div>
                  </div>
                </div>
              </article>
            </div>

            <!-- Card 3 -->
            <div class="col-md-6 col-lg-4 mb-4" *ngIf="positiveLatest[i+2] as item3">
              <article class="card card">
                <div class="card-body d-flex flex-column">
                  <div class="card-head d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center gap-2">
                      <div class="avatar">U</div>
                      <div class="d-flex flex-column">
                        <span class="user">{{ item3.userName || 'User' }}</span>
                        <span class="badge badge-positive">Positive</span>
                      </div>
                    </div>
                    <div class="rating"><span class="star sm">â˜…</span> {{ item3.rating }}/5</div>
                  </div>

                  <p class="comment" [title]="item3.comments">{{ item3.comments }}</p>

                  <div class="footer d-flex mt-auto">
                    <div class="ms-auto text-muted small">
                      {{ timeAgo(item3.submittedTimestamp || item3.createdAt) }}
                    </div>
                  </div>
                </div>
              </article>
            </div>

          </div>
        </div>
      </ng-container>
    </div>

    <!-- Carousel controls -->
    <button class="carousel-control-prev control" type="button"
            [attr.data-bs-target]="'#latestPosCarousel-' + eventId"
            data-bs-slide="prev" aria-label="Previous">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next control" type="button"
            [attr.data-bs-target]="'#latestPosCarousel-' + eventId"
            data-bs-slide="next" aria-label="Next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <ng-template #noPosTpl>
    <div class="text-muted small mt-2">No positive comments yet.</div>
  </ng-template>
</section>

<!-- Negative -->
<section class="section mt-4">
  <div class="section-head d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center gap-2">
      <h5 class="mb-0">Critical Reviews</h5>
    </div>
    <span class="badge rounded-pill bg-danger-subtle text-danger border border-danger">
      {{ negativeLatest.length }}
    </span>
  </div>

  <div
    *ngIf="negativeLatest.length > 0; else noNegTpl"
    class="carousel carousel-dark slide carousel mt-3 controls-middle"
    [attr.id]="'latestNegCarousel-' + eventId"
    data-bs-ride="carousel"
    data-bs-interval="5000"
    data-bs-pause="hover"
    data-bs-touch="true"
    data-bs-keyboard="true"
  >
    <div class="carousel-inner">
      <!-- 3 cards per slide using i%3 -->
      <ng-container *ngFor="let _ of negativeLatest; let i = index">
        <div class="carousel-item" *ngIf="i % 3 === 0" [class.active]="i === 0">
          <div class="row justify-content-center">

            <!-- Card 1 -->
            <div class="col-md-6 col-lg-4 mb-4" *ngIf="negativeLatest[i] as item1">
              <article class="card card">
                <div class="card-body d-flex flex-column">
                  <div class="card-head d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center gap-2">
                      <div class="avatar">U</div>
                      <div class="d-flex flex-column">
                        <span class="user">{{ item1.userName || 'User' }}</span>
                        <span class="badge badge-negative">Negative</span>
                      </div>
                    </div>
                    <div class="rating"><span class="star sm">â˜…</span> {{ item1.rating }}/5</div>
                  </div>

                  <!-- Full comment (no expand) -->
                  <p class="comment" [title]="item1.comments">{{ item1.comments }}</p>

                  <!-- Footer: time-ago bottom-right -->
                  <div class="footer d-flex mt-auto">
                    <div class="ms-auto text-muted small">
                      {{ timeAgo(item1.submittedTimestamp || item1.createdAt) }}
                    </div>
                  </div>
                </div>
              </article>
            </div>

            <!-- Card 2 -->
            <div class="col-md-6 col-lg-4 mb-4" *ngIf="negativeLatest[i+1] as item2">
              <article class="card card">
                <div class="card-body d-flex flex-column">
                  <div class="card-head d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center gap-2">
                      <div class="avatar">U</div>
                      <div class="d-flex flex-column">
                        <span class="user">{{ item2.userName || 'User' }}</span>
                        <span class="badge badge-negative">Negative</span>
                      </div>
                    </div>
                    <div class="rating"><span class="star sm">â˜…</span> {{ item2.rating }}/5</div>
                  </div>

                  <p class="comment" [title]="item2.comments">{{ item2.comments }}</p>

                  <div class="footer d-flex mt-auto">
                    <div class="ms-auto text-muted small">
                      {{ timeAgo(item2.submittedTimestamp || item2.createdAt) }}
                    </div>
                  </div>
                </div>
              </article>
            </div>

            <!-- Card 3 -->
            <div class="col-md-6 col-lg-4 mb-4" *ngIf="negativeLatest[i+2] as item3">
              <article class="card card">
                <div class="card-body d-flex flex-column">
                  <div class="card-head d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center gap-2">
                      <div class="avatar">U</div>
                      <div class="d-flex flex-column">
                        <span class="user">{{ item3.userName || 'User' }}</span>
                        <span class="badge badge-negative">Negative</span>
                      </div>
                    </div>
                    <div class="rating"><span class="star sm">â˜…</span> {{ item3.rating }}/5</div>
                  </div>

                  <p class="comment" [title]="item3.comments">{{ item3.comments }}</p>

                  <div class="footer d-flex mt-auto">
                    <div class="ms-auto text-muted small">
                      {{ timeAgo(item3.submittedTimestamp || item3.createdAt) }}
                    </div>
                  </div>
                </div>
              </article>
            </div>

          </div>
        </div>
      </ng-container>
    </div>

    <!-- Carousel controls -->
    <button class="carousel-control-prev control" type="button"
            [attr.data-bs-target]="'#latestNegCarousel-' + eventId"
            data-bs-slide="prev" aria-label="Previous">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next control" type="button"
            [attr.data-bs-target]="'#latestNegCarousel-' + eventId"
            data-bs-slide="next" aria-label="Next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <ng-template #noNegTpl>
    <div class="text-muted small mt-2">No negative comments yet.</div>
  </ng-template>
</section>
</body>  